---
title: "icager vignette"
date: "`r Sys.Date()`"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{hello}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
#library(kableExtra)
```

```{r setup}
library(dplyr)
library(icager)
```

# Dataset

A dataset of choices made by sample agents performing probabilistic reversal learning task. Includes actions /visits/ performed by 3 random agents, first 10 per each of 11 experimental stages.


```{r print data}
data(dx)
#For info call ?dx
```

# Import data

`import()` imports all experimentals files stored in given directories, parses on the basis on prespecified format and returns a list.

```{r import data, eval=FALSE}
mydata <- 
  import(
    list.files(
      path = choose.dir(),
      full.names = T), 
    version = 1)
mydata = dplyr::bind_rows(mydata)
```

# Inform formatting

These two functions help decode the data if initial software settings
are long gone. Use `hint()` or `specify()`.

The `hint()` provides help to decode markings.

```{r}
hint(dx)
```

The `specify()` gives basic description to identify dataset.

```{r}
specify(dx)
```

For help call `?hint` or `?specify`

# Standardise form

For combining a couple of datasets or simply in case of changing software on the way it is useful to standardise the received datasets. The `standardise()` function select variables and changes their type by prespecified form.

```{r}
mydata <- standardise(dx)
```

# Experimental scheme

An experimental scheme corresponds to probabilistic reversal learning task, in which assignment between proposed options and probabilities of access to reward are steadily reversed. An option is called a `corner`, probability of reward - reward probability (`rp`).
Each such assignment is a state of all the `corner`s' `rp` at a current moment and refered to as `contingency`. To add the contingency state, also termed as experimental phase call `contingencise()` on a dataset. Then see the data-based experimental scheme with `printscheme()`. 

Various contingencies may belong to different categories of experimental scheme, e.x. module of adaptation consists of contingencies labelled as "0x0.9" or/and "0x0", whereas the reversals stage of "0x0.3x0.9" or/and "0.3x0.9". 

## Assign contingency

```{r assign continency}
dx <- contingencise(dx)
```

```{r}
unique(dx$contingency)
```

## Print scheme

```{r eval=F}
printscheme(dx)
```

```{r exp scheme, echo = F}
printscheme(dx) %>% knitr::kable(format = "html") %>%
   kableExtra::kable_styling(bootstrap_options = c("striped", "hover", "condensed", "responsive"))
```

```{r hidden plot}
plotscheme(dx)
```
